<?xml version="1.0" encoding="utf-8"?>
<!--
  Multi-Inspector Satellite Fleet Model
  
  Configuration:
  - 1 Target satellite (static, at origin)
  - 3 Inspector satellites (dynamic, with reaction wheels + thrusters)
  
  Each inspector has:
  - 3 Reaction Wheels (X, Y, Z axes)
  - 6 Thrusters (2 per axis)
-->
<mujoco model="satellite_fleet">
  <compiler angle="degree" coordinate="local" inertiafromgeom="true"/>
  <option integrator="RK4" timestep="0.005" gravity="0 0 0"/>
  
  <visual>
    <global offwidth="2560" offheight="1440"/>
  </visual>

  <default>
    <joint armature="0" damping="0" limited="false"/>
    <geom conaffinity="0" condim="3" density="500" friction="1 0.5 0.5" 
          margin="0" rgba="0.8 0.6 0.4 1"/>
    <site type="sphere" size="0.015" rgba="0.5 0.5 0.5 0.3"/>
  </default>

  <asset>
    <texture type="skybox" builtin="gradient" rgb1=".05 .05 .1" rgb2="0 0 0" 
             width="32" height="32"/>
    <material name="inspector_1" rgba="0.2 0.6 0.9 0.9"/>
    <material name="inspector_2" rgba="0.9 0.4 0.2 0.9"/>
    <material name="inspector_3" rgba="0.3 0.8 0.3 0.9"/>
    <material name="target_mat" rgba="0.5 0.5 0.5 0.9"/>
    <material name="solar_mat" rgba="0.15 0.15 0.4 0.9"/>
    <material name="rw_mat" rgba="0.3 0.3 0.3 1"/>
  </asset>

  <worldbody>
    <light cutoff="100" diffuse="1 1 1" dir="-0 0 -1.3" directional="true" 
           exponent="1" pos="0 0 10" specular="0.1 0.1 0.1"/>
    
    <!-- Fleet overview camera -->
    <camera name="fleet_cam" pos="15 15 12" mode="fixed" fovy="60" 
            xyaxes="-0.707 0.707 0 -0.408 -0.408 0.816"/>
    
    <!-- ==================== TARGET SATELLITE ==================== -->
    <body name="target" pos="0 0 0">
      <geom name="target_body" type="box" size="0.5 0.5 0.5" material="target_mat"
            contype="0" conaffinity="0"/>
      <!-- Solar panels -->
      <geom name="solar_l" type="box" size="1.0 0.05 0.3" pos="-1.5 0 0"
            material="solar_mat" contype="0" conaffinity="0"/>
      <geom name="solar_r" type="box" size="1.0 0.05 0.3" pos="1.5 0 0"
            material="solar_mat" contype="0" conaffinity="0"/>
    </body>

    <!-- ==================== INSPECTOR 1 (Blue) ==================== -->
    <body name="inspector_1" pos="5 0 0">
      <joint name="inspector_1_root" type="free"/>
      <geom name="insp1_body" type="sphere" size="0.145" mass="9.1" 
            material="inspector_1"/>
      
      <!-- Reaction Wheels -->
      <body name="insp1_rw_x" pos="0.08 0 0">
        <joint name="insp1_rw_x_joint" type="hinge" axis="1 0 0" damping="0.0001" armature="0.001"/>
        <geom type="cylinder" size="0.025 0.008" mass="0.3" euler="0 90 0" material="rw_mat"/>
      </body>
      <body name="insp1_rw_y" pos="0 0.08 0">
        <joint name="insp1_rw_y_joint" type="hinge" axis="0 1 0" damping="0.0001" armature="0.001"/>
        <geom type="cylinder" size="0.025 0.008" mass="0.3" euler="90 0 0" material="rw_mat"/>
      </body>
      <body name="insp1_rw_z" pos="0 0 0.08">
        <joint name="insp1_rw_z_joint" type="hinge" axis="0 0 1" damping="0.0001" armature="0.001"/>
        <geom type="cylinder" size="0.025 0.008" mass="0.3" material="rw_mat"/>
      </body>
      
      <!-- Thruster sites -->
      <site name="insp1_t_px" pos="0.145 0 0"/>
      <site name="insp1_t_mx" pos="-0.145 0 0"/>
      <site name="insp1_t_py" pos="0 0.145 0"/>
      <site name="insp1_t_my" pos="0 -0.145 0"/>
      <site name="insp1_t_pz" pos="0 0 0.145"/>
      <site name="insp1_t_mz" pos="0 0 -0.145"/>
    </body>

    <!-- ==================== INSPECTOR 2 (Orange) ==================== -->
    <body name="inspector_2" pos="-2.5 4.33 0">
      <joint name="inspector_2_root" type="free"/>
      <geom name="insp2_body" type="sphere" size="0.145" mass="9.1" 
            material="inspector_2"/>
      
      <!-- Reaction Wheels -->
      <body name="insp2_rw_x" pos="0.08 0 0">
        <joint name="insp2_rw_x_joint" type="hinge" axis="1 0 0" damping="0.0001" armature="0.001"/>
        <geom type="cylinder" size="0.025 0.008" mass="0.3" euler="0 90 0" material="rw_mat"/>
      </body>
      <body name="insp2_rw_y" pos="0 0.08 0">
        <joint name="insp2_rw_y_joint" type="hinge" axis="0 1 0" damping="0.0001" armature="0.001"/>
        <geom type="cylinder" size="0.025 0.008" mass="0.3" euler="90 0 0" material="rw_mat"/>
      </body>
      <body name="insp2_rw_z" pos="0 0 0.08">
        <joint name="insp2_rw_z_joint" type="hinge" axis="0 0 1" damping="0.0001" armature="0.001"/>
        <geom type="cylinder" size="0.025 0.008" mass="0.3" material="rw_mat"/>
      </body>
      
      <!-- Thruster sites -->
      <site name="insp2_t_px" pos="0.145 0 0"/>
      <site name="insp2_t_mx" pos="-0.145 0 0"/>
      <site name="insp2_t_py" pos="0 0.145 0"/>
      <site name="insp2_t_my" pos="0 -0.145 0"/>
      <site name="insp2_t_pz" pos="0 0 0.145"/>
      <site name="insp2_t_mz" pos="0 0 -0.145"/>
    </body>

    <!-- ==================== INSPECTOR 3 (Green) ==================== -->
    <body name="inspector_3" pos="-2.5 -4.33 0">
      <joint name="inspector_3_root" type="free"/>
      <geom name="insp3_body" type="sphere" size="0.145" mass="9.1" 
            material="inspector_3"/>
      
      <!-- Reaction Wheels -->
      <body name="insp3_rw_x" pos="0.08 0 0">
        <joint name="insp3_rw_x_joint" type="hinge" axis="1 0 0" damping="0.0001" armature="0.001"/>
        <geom type="cylinder" size="0.025 0.008" mass="0.3" euler="0 90 0" material="rw_mat"/>
      </body>
      <body name="insp3_rw_y" pos="0 0.08 0">
        <joint name="insp3_rw_y_joint" type="hinge" axis="0 1 0" damping="0.0001" armature="0.001"/>
        <geom type="cylinder" size="0.025 0.008" mass="0.3" euler="90 0 0" material="rw_mat"/>
      </body>
      <body name="insp3_rw_z" pos="0 0 0.08">
        <joint name="insp3_rw_z_joint" type="hinge" axis="0 0 1" damping="0.0001" armature="0.001"/>
        <geom type="cylinder" size="0.025 0.008" mass="0.3" material="rw_mat"/>
      </body>
      
      <!-- Thruster sites -->
      <site name="insp3_t_px" pos="0.145 0 0"/>
      <site name="insp3_t_mx" pos="-0.145 0 0"/>
      <site name="insp3_t_py" pos="0 0.145 0"/>
      <site name="insp3_t_my" pos="0 -0.145 0"/>
      <site name="insp3_t_pz" pos="0 0 0.145"/>
      <site name="insp3_t_mz" pos="0 0 -0.145"/>
    </body>
  </worldbody>

  <!-- ==================== ACTUATORS ==================== -->
  <actuator>
    <!-- Inspector 1 Reaction Wheels -->
    <motor name="insp1_rw_x" joint="insp1_rw_x_joint" gear="1" ctrlrange="-0.1 0.1" ctrllimited="true"/>
    <motor name="insp1_rw_y" joint="insp1_rw_y_joint" gear="1" ctrlrange="-0.1 0.1" ctrllimited="true"/>
    <motor name="insp1_rw_z" joint="insp1_rw_z_joint" gear="1" ctrlrange="-0.1 0.1" ctrllimited="true"/>
    
    <!-- Inspector 2 Reaction Wheels -->
    <motor name="insp2_rw_x" joint="insp2_rw_x_joint" gear="1" ctrlrange="-0.1 0.1" ctrllimited="true"/>
    <motor name="insp2_rw_y" joint="insp2_rw_y_joint" gear="1" ctrlrange="-0.1 0.1" ctrllimited="true"/>
    <motor name="insp2_rw_z" joint="insp2_rw_z_joint" gear="1" ctrlrange="-0.1 0.1" ctrllimited="true"/>
    
    <!-- Inspector 3 Reaction Wheels -->
    <motor name="insp3_rw_x" joint="insp3_rw_x_joint" gear="1" ctrlrange="-0.1 0.1" ctrllimited="true"/>
    <motor name="insp3_rw_y" joint="insp3_rw_y_joint" gear="1" ctrlrange="-0.1 0.1" ctrllimited="true"/>
    <motor name="insp3_rw_z" joint="insp3_rw_z_joint" gear="1" ctrlrange="-0.1 0.1" ctrllimited="true"/>
  </actuator>

  <!-- ==================== SENSORS ==================== -->
  <sensor>
    <!-- Inspector 1 -->
    <jointvel name="insp1_rw_x_speed" joint="insp1_rw_x_joint"/>
    <jointvel name="insp1_rw_y_speed" joint="insp1_rw_y_joint"/>
    <jointvel name="insp1_rw_z_speed" joint="insp1_rw_z_joint"/>
    <framepos name="insp1_pos" objtype="body" objname="inspector_1"/>
    <framequat name="insp1_quat" objtype="body" objname="inspector_1"/>
    <framelinvel name="insp1_vel" objtype="body" objname="inspector_1"/>
    <frameangvel name="insp1_angvel" objtype="body" objname="inspector_1"/>
    
    <!-- Inspector 2 -->
    <jointvel name="insp2_rw_x_speed" joint="insp2_rw_x_joint"/>
    <jointvel name="insp2_rw_y_speed" joint="insp2_rw_y_joint"/>
    <jointvel name="insp2_rw_z_speed" joint="insp2_rw_z_joint"/>
    <framepos name="insp2_pos" objtype="body" objname="inspector_2"/>
    <framequat name="insp2_quat" objtype="body" objname="inspector_2"/>
    <framelinvel name="insp2_vel" objtype="body" objname="inspector_2"/>
    <frameangvel name="insp2_angvel" objtype="body" objname="inspector_2"/>
    
    <!-- Inspector 3 -->
    <jointvel name="insp3_rw_x_speed" joint="insp3_rw_x_joint"/>
    <jointvel name="insp3_rw_y_speed" joint="insp3_rw_y_joint"/>
    <jointvel name="insp3_rw_z_speed" joint="insp3_rw_z_joint"/>
    <framepos name="insp3_pos" objtype="body" objname="inspector_3"/>
    <framequat name="insp3_quat" objtype="body" objname="inspector_3"/>
    <framelinvel name="insp3_vel" objtype="body" objname="inspector_3"/>
    <frameangvel name="insp3_angvel" objtype="body" objname="inspector_3"/>
  </sensor>

</mujoco>
